version: "3"
services:
  DevOps_Project:
    container_name: Kaddem
    image: amenox1810/kaddem
    restart: always
    build: .
    ports:
      - 8089:8089
    depends_on:
      - mysqldb
    environment:
      SPRING_APPLICATION_JSON: '{ "spring.datasource.url" : "jdbc:mysql://mysqldb:3306/khaddemApp?createDatabaseIfNotExist=true", "spring.datasource.username" : "root" }'


  mysqldb:
    container_name: mysqldata
    image: amenox1810/mysql:5.7
    volumes:
      -  mysql-data:/var/lib/mysql
    ports:
      - 3306:3306
    environment:
      MYSQL_DATABASE: khaddemApp
      MYSQL_ALLOW_EMPTY_PASSWORD: yes

  front-app:
    image: amenox1810/devops_project_front
    container_name: angular-front-project
    ports:
      - "4200:80"
    depends_on:
      - DevOps_Project
      # networks:
      # - my-network
    volumes:
      - ./frontend-data:/app/dist
    restart: always

volumes:
  mysql-data: