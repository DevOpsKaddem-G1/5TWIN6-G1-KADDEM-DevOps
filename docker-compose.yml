version: "3"
services:
  DevOps_Project:
    container_name: Kaddem
    image: amenox1810/amenjouini
    restart: always
    build: .
    ports:
      - 8044:8044
    depends_on:
      - mysqldb
    environment:
      SPRING_APPLICATION_JSON: '{ "spring.datasource.url" : "jdbc:mysql://mysqldb:3306/khaddemApp?createDatabaseIfNotExist=true", "spring.datasource.username" : "root" }'


  mysqldb:
    container_name: mysqldata
    image: amenox1810/mysql:5.7
    volumes:
      -  mysql-data:/var/lib/mysql
    ports:
      - 3306:3306
    environment:
      MYSQL_DATABASE: khaddemApp
      MYSQL_ALLOW_EMPTY_PASSWORD: yes



volumes:
  mysql-data: